import{b as a,o as $,i as s,c as r,C as f,e as b,B as S,S as d,d as _,f as g,t as n,p as C}from"./index-6s_4JTtF.js";import{a as l}from"./amas-D0E_g4bX.js";var w=n('<h2 class="text-lg font-semibold text-content mb-3">配置编辑器'),A=n('<textarea class="w-full h-80 px-4 py-3 rounded-lg text-sm font-mono bg-surface border border-border text-content focus:outline-none focus:ring-2 focus:ring-accent/30 focus:border-accent resize-y">'),M=n('<div class="flex justify-end mt-3">'),J=n('<h2 class="text-lg font-semibold text-content mb-3">算法指标'),N=n('<pre class="text-xs font-mono text-content-secondary bg-surface-secondary p-4 rounded-lg overflow-x-auto">'),O=n('<div class="space-y-6 animate-fade-in-up"><h1 class="text-2xl font-bold text-content">AMAS 配置'),E=n('<div class="flex justify-center py-12">');function z(){const[o,i]=a(""),[c,m]=a(null),[p,v]=a(!0),[x,u]=a(!1);$(async()=>{try{const[t,e]=await Promise.allSettled([l.getConfig(),l.getMetrics()]);t.status==="fulfilled"&&i(JSON.stringify(t.value,null,2)),e.status==="fulfilled"&&m(e.value)}catch{}v(!1)});async function h(){try{const t=JSON.parse(o());u(!0),await l.updateConfig(t),g.toast.success("AMAS 配置已更新")}catch(t){g.toast.error("保存失败",t instanceof Error?t.message:"JSON 格式错误")}finally{u(!1)}}return(()=>{var t=O();return t.firstChild,s(t,r(d,{get when(){return!p()},get fallback(){return(()=>{var e=E();return s(e,r(_,{size:"lg"})),e})()},get children(){return[r(f,{variant:"elevated",get children(){return[w(),(()=>{var e=A();return e.$$input=y=>i(y.currentTarget.value),b(()=>e.value=o()),e})(),(()=>{var e=M();return s(e,r(S,{onClick:h,get loading(){return x()},children:"保存配置"})),e})()]}}),r(d,{get when(){return c()},get children(){return r(f,{variant:"elevated",get children(){return[J(),(()=>{var e=N();return s(e,()=>JSON.stringify(c(),null,2)),e})()]}})}})]}}),null),t})()}C(["input"]);export{z as default};
