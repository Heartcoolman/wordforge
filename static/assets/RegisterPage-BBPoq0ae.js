import{u as I,a as h,b as n,i as r,c as a,m as C,B as E,A as S,C as T,f as A,t as u}from"./index-6s_4JTtF.js";import{I as o}from"./Input-DbQWqGqX.js";var B=u('<h1 class="text-2xl font-bold text-center text-content mb-6">注册'),L=u("<form class=space-y-4>"),P=u('<p class="mt-4 text-center text-sm text-content-secondary">已有账号？ '),j=u('<div class="min-h-[70vh] flex items-center justify-center">'),D=u('<p class="text-sm text-error text-center">');function U(){const p=I();h.isAuthenticated()&&p("/",{replace:!0});const[i,x]=n(""),[m,y]=n(""),[l,b]=n(""),[d,_]=n(""),[$,f]=n(!1),[g,s]=n("");async function w(c){if(c.preventDefault(),!i()||!m()||!l()){s("请填写所有字段");return}if(l().length<6){s("密码至少 6 位");return}if(l()!==d()){s("两次密码不一致");return}f(!0),s("");try{await h.register(i(),m(),l()),A.toast.success("注册成功"),p("/",{replace:!0})}catch(e){const t=e instanceof Error?e.message:"注册失败";s(t)}finally{f(!1)}}return(()=>{var c=j();return r(c,a(T,{variant:"elevated",class:"w-full max-w-sm animate-fade-in-up",get children(){return[B(),(()=>{var e=L();return e.addEventListener("submit",w),r(e,a(o,{label:"邮箱",type:"email",placeholder:"your@email.com",get value(){return i()},onInput:t=>x(t.currentTarget.value)}),null),r(e,a(o,{label:"用户名",type:"text",placeholder:"昵称",get value(){return m()},onInput:t=>y(t.currentTarget.value)}),null),r(e,a(o,{label:"密码",type:"password",placeholder:"至少 6 位",get value(){return l()},onInput:t=>b(t.currentTarget.value)}),null),r(e,a(o,{label:"确认密码",type:"password",placeholder:"再次输入密码",get value(){return d()},onInput:t=>_(t.currentTarget.value)}),null),r(e,(()=>{var t=C(()=>!!g());return()=>t()&&(()=>{var v=D();return r(v,g),v})()})(),null),r(e,a(E,{type:"submit",fullWidth:!0,get loading(){return $()},children:"注册"}),null),e})(),(()=>{var e=P();return e.firstChild,r(e,a(S,{href:"/login",class:"text-accent hover:underline",children:"去登录"}),null),e})()]}})),c})()}export{U as default};
