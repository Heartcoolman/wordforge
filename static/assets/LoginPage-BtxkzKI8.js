import{u as _,a as f,b as u,i as r,c as a,m as $,B as b,A as w,C,f as E,t as n}from"./index-6s_4JTtF.js";import{I as v}from"./Input-DbQWqGqX.js";var I=n('<h1 class="text-2xl font-bold text-center text-content mb-6">登录'),S=n("<form class=space-y-4>"),L=n('<p class="mt-4 text-center text-sm text-content-secondary">还没有账号？ '),A=n('<div class="min-h-[70vh] flex items-center justify-center">'),B=n('<p class="text-sm text-error text-center">');function j(){const m=_();f.isAuthenticated()&&m("/",{replace:!0});const[l,g]=u(""),[o,h]=u(""),[x,p]=u(!1),[c,i]=u("");async function y(s){if(s.preventDefault(),!l()||!o()){i("请填写邮箱和密码");return}p(!0),i("");try{await f.login(l(),o()),E.toast.success("登录成功"),m("/",{replace:!0})}catch(e){const t=e instanceof Error?e.message:"登录失败";i(t)}finally{p(!1)}}return(()=>{var s=A();return r(s,a(C,{variant:"elevated",class:"w-full max-w-sm animate-fade-in-up",get children(){return[I(),(()=>{var e=S();return e.addEventListener("submit",y),r(e,a(v,{label:"邮箱",type:"email",placeholder:"your@email.com",get value(){return l()},onInput:t=>g(t.currentTarget.value),get error(){return c()&&!l()?"请输入邮箱":void 0}}),null),r(e,a(v,{label:"密码",type:"password",placeholder:"输入密码",get value(){return o()},onInput:t=>h(t.currentTarget.value)}),null),r(e,(()=>{var t=$(()=>!!c());return()=>t()&&(()=>{var d=B();return r(d,c),d})()})(),null),r(e,a(b,{type:"submit",fullWidth:!0,get loading(){return x()},children:"登录"}),null),e})(),(()=>{var e=L();return e.firstChild,r(e,a(w,{href:"/register",class:"text-accent hover:underline",children:"立即注册"}),null),e})()]}})),s})()}export{j as default};
