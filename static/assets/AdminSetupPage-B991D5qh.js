import{u as _,b as s,i as r,c as l,m as $,B as w,C as I,x as C,f as E,t as u}from"./index-6s_4JTtF.js";import{I as i}from"./Input-DbQWqGqX.js";import{a as S}from"./admin-Dg2dsvo0.js";var T=u('<h1 class="text-2xl font-bold text-center text-content mb-2">初始化管理后台'),k=u('<p class="text-sm text-content-secondary text-center mb-6">首次使用，请创建管理员账户'),A=u("<form class=space-y-4>"),B=u('<div class="min-h-screen flex items-center justify-center bg-surface-secondary p-4">'),L=u('<p class="text-sm text-error text-center">');function M(){const g=_(),[c,v]=s(""),[a,x]=s(""),[m,b]=s(""),[y,p]=s(!1),[d,n]=s("");async function h(o){if(o.preventDefault(),!c()||!a()){n("请填写所有字段");return}if(a()!==m()){n("密码不一致");return}if(a().length<6){n("密码至少 6 位");return}p(!0),n("");try{const e=await S.setup({email:c(),password:a()});C.setAdminToken(e.token),E.toast.success("管理员账户已创建"),g("/admin",{replace:!0})}catch(e){n(e instanceof Error?e.message:"创建失败")}finally{p(!1)}}return(()=>{var o=B();return r(o,l(I,{variant:"elevated",class:"w-full max-w-sm animate-fade-in-up",get children(){return[T(),k(),(()=>{var e=A();return e.addEventListener("submit",h),r(e,l(i,{label:"管理员邮箱",type:"email",get value(){return c()},onInput:t=>v(t.currentTarget.value)}),null),r(e,l(i,{label:"密码",type:"password",placeholder:"至少 6 位",get value(){return a()},onInput:t=>x(t.currentTarget.value)}),null),r(e,l(i,{label:"确认密码",type:"password",get value(){return m()},onInput:t=>b(t.currentTarget.value)}),null),r(e,(()=>{var t=$(()=>!!d());return()=>t()&&(()=>{var f=L();return r(f,d),f})()})(),null),r(e,l(w,{type:"submit",fullWidth:!0,get loading(){return y()},children:"创建管理员"}),null),e})()]}})),o})()}export{M as default};
