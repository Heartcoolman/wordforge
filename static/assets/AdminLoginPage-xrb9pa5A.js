import{u as w,b as n,o as _,x as f,i as t,c as s,m as $,B as k,C as A,f as E,t as l}from"./index-6s_4JTtF.js";import{I as g}from"./Input-DbQWqGqX.js";import{a as v}from"./admin-Dg2dsvo0.js";var I=l('<h1 class="text-2xl font-bold text-center text-content mb-6">管理后台登录'),S=l("<form class=space-y-4>"),T=l('<div class="min-h-screen flex items-center justify-center bg-surface-secondary p-4">'),C=l('<p class="text-sm text-error text-center">');function P(){const i=w(),[o,x]=n(""),[u,y]=n(""),[b,m]=n(!1),[p,c]=n("");_(async()=>{try{(await v.checkStatus()).initialized||i("/admin/setup",{replace:!0})}catch{}f.getAdminToken()&&i("/admin",{replace:!0})});async function h(a){if(a.preventDefault(),!o()||!u()){c("请填写邮箱和密码");return}m(!0),c("");try{const e=await v.login({email:o(),password:u()});f.setAdminToken(e.token),E.toast.success("管理员登录成功"),i("/admin",{replace:!0})}catch(e){c(e instanceof Error?e.message:"登录失败")}finally{m(!1)}}return(()=>{var a=T();return t(a,s(A,{variant:"elevated",class:"w-full max-w-sm animate-fade-in-up",get children(){return[I(),(()=>{var e=S();return e.addEventListener("submit",h),t(e,s(g,{label:"管理员邮箱",type:"email",get value(){return o()},onInput:r=>x(r.currentTarget.value)}),null),t(e,s(g,{label:"密码",type:"password",get value(){return u()},onInput:r=>y(r.currentTarget.value)}),null),t(e,(()=>{var r=$(()=>!!p());return()=>r()&&(()=>{var d=C();return t(d,p),d})()})(),null),t(e,s(k,{type:"submit",fullWidth:!0,get loading(){return b()},children:"登录"}),null),e})()]}})),a})()}export{P as default};
