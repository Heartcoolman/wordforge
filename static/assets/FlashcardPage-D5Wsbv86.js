import{u as N,b as i,o as C,f as S,k as O,i as l,c as r,S as c,C as g,m as R,e as U,n as T,l as q,B as h,d as G,t as s,p as H}from"./index-6s_4JTtF.js";import{P as J}from"./Progress-DU77zIq3.js";import{l as L}from"./learning-PjntfU40.js";import{r as Q}from"./records-C70kufFG.js";var V=s('<p class="text-3xl font-bold text-content">'),X=s('<p class="text-content-tertiary mt-2">'),Y=s('<p class="text-xs text-content-tertiary mt-4">点击翻转 / 空格键'),Z=s('<p class="text-2xl font-bold text-content">'),ee=s('<p class="text-sm text-content-tertiary mt-2">'),te=s('<p class="text-sm text-content-secondary mt-3 italic">"<!>"'),ne=s('<div class="perspective cursor-pointer"><div><div class="absolute inset-0 backface-hidden"></div><div class="absolute inset-0 backface-hidden rotate-y-180">'),re=s('<svg class="w-5 h-5 mr-1"fill=none viewBox="0 0 24 24"stroke=currentColor stroke-width=2><path stroke-linecap=round stroke-linejoin=round d="M6 18L18 6M6 6l12 12">'),se=s('<svg class="w-5 h-5 mr-1"fill=none viewBox="0 0 24 24"stroke=currentColor stroke-width=2><path stroke-linecap=round stroke-linejoin=round d="M5 13l4 4L19 7">'),le=s('<div class="flex gap-4">'),ae=s('<div class="max-w-lg mx-auto space-y-6 animate-fade-in-up"><h1 class="text-2xl font-bold text-content">闪记模式'),ie=s('<div class="flex justify-center py-20">'),oe=s('<h2 class="text-xl font-bold text-content mb-4">完成!'),ce=s('<div class="flex gap-8 justify-center mb-6"><div><p class="text-2xl font-bold text-success"></p><p class="text-xs text-content-secondary">认识</p></div><div><p class="text-2xl font-bold text-error"></p><p class="text-xs text-content-secondary">不认识');function me(){const j=N(),[d,E]=i([]),[u,I]=i(0),[p,m]=i(!1),[B,M]=i(!0),[z,A]=i(0),[W,D]=i(0),[K,P]=i(""),[v,w]=i(!1);C(async()=>{try{const e=await L.createSession();P(e.sessionId);const t=await L.getStudyWords();t.words.length===0&&(S.toast.warning("暂无单词"),w(!0)),E(t.words)}catch(e){S.toast.error("加载失败",e instanceof Error?e.message:"")}finally{M(!1)}});function $(e){v()||((e.key===" "||e.key==="Enter")&&(e.preventDefault(),m(!p())),(e.key==="ArrowRight"||e.key==="1")&&k(),(e.key==="ArrowLeft"||e.key==="2")&&y())}C(()=>{document.addEventListener("keydown",$),O(()=>document.removeEventListener("keydown",$))});function _(e){const t=d()[u()];if(t&&Q.create({wordId:t.id,isCorrect:e,responseTimeMs:0,sessionId:K()||void 0}).catch(()=>{}),u()+1>=d().length){w(!0);return}I(o=>o+1),m(!1)}function k(){A(e=>e+1),_(!0)}function y(){D(e=>e+1),_(!1)}const a=()=>d()[u()];return(()=>{var e=ae();return e.firstChild,l(e,r(c,{get when(){return!B()},get fallback(){return(()=>{var t=ie();return l(t,r(G,{size:"lg"})),t})()},get children(){return r(c,{get when(){return!v()},get fallback(){return r(g,{variant:"elevated",class:"text-center py-12",get children(){return[oe(),(()=>{var t=ce(),o=t.firstChild,f=o.firstChild,x=o.nextSibling,n=x.firstChild;return l(f,z),l(n,W),t})(),r(h,{onClick:()=>j("/flashcard",{replace:!0}),children:"再来一组"})]}})},get children(){return r(c,{get when(){return d().length>0},get children(){return[r(J,{get value(){return u()+1},get max(){return d().length},showLabel:!0,size:"sm"}),(()=>{var t=ne(),o=t.firstChild,f=o.firstChild,x=f.nextSibling;return t.$$click=()=>m(!p()),l(f,r(g,{variant:"glass",class:"h-full flex flex-col items-center justify-center",get children(){return[(()=>{var n=V();return l(n,()=>a()?.text),n})(),r(c,{get when(){return a()?.pronunciation},get children(){var n=X();return l(n,()=>a()?.pronunciation),n}}),Y()]}})),l(x,r(g,{variant:"glass",class:"h-full flex flex-col items-center justify-center",get children(){return[(()=>{var n=Z();return l(n,()=>a()?.meaning),n})(),r(c,{get when(){return a()?.partOfSpeech},get children(){var n=ee();return l(n,()=>a()?.partOfSpeech),n}}),r(c,{get when(){return R(()=>!!a()?.examples)()&&a().examples.length>0},get children(){var n=te(),F=n.firstChild,b=F.nextSibling;return b.nextSibling,l(n,()=>a().examples[0],b),n}})]}})),U(()=>T(o,q("relative w-full h-64 transition-transform duration-500 preserve-3d",p()&&"rotate-y-180"))),t})(),(()=>{var t=le();return l(t,r(h,{onClick:y,variant:"danger",fullWidth:!0,size:"lg",get children(){return[re(),"不认识 (2/←)"]}}),null),l(t,r(h,{onClick:k,variant:"success",fullWidth:!0,size:"lg",get children(){return[se(),"认识 (1/→)"]}}),null),t})()]}})}})}}),null),e})()}H(["click"]);export{me as default};
