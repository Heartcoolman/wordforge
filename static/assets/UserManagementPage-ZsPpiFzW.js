import{b as p,o as B,i as n,c as a,F as S,B as w,d as C,S as U,f as s,t as o}from"./index-6s_4JTtF.js";import{B as k}from"./Badge-k5WGClrt.js";import{a as l}from"./admin-Dg2dsvo0.js";var z=o('<div class="overflow-x-auto rounded-xl border border-border"><table class="w-full text-sm"><thead><tr class="bg-surface-secondary border-b border-border"><th class="px-4 py-3 text-left font-medium text-content-secondary">用户名</th><th class="px-4 py-3 text-left font-medium text-content-secondary">邮箱</th><th class="px-4 py-3 text-left font-medium text-content-secondary">状态</th><th class="px-4 py-3 text-right font-medium text-content-secondary">操作</th></tr></thead><tbody>'),E=o('<div class="space-y-6 animate-fade-in-up"><h1 class="text-2xl font-bold text-content">用户管理'),F=o('<div class="flex justify-center py-12">'),M=o('<tr class="border-b border-border last:border-b-0"><td class="px-4 py-3 font-medium text-content"></td><td class="px-4 py-3 text-content-secondary"></td><td class="px-4 py-3"></td><td class="px-4 py-3 text-right">');function P(){const[m,g]=p([]),[h,i]=p(!0);async function c(){i(!0);try{const t=await l.getUsers();g(t)}catch(t){s.toast.error("加载失败",t instanceof Error?t.message:"")}finally{i(!1)}}B(c);async function b(t){try{t.isBanned?(await l.unbanUser(t.id),s.toast.success("已解封")):(await l.banUser(t.id),s.toast.success("已封禁")),c()}catch(e){s.toast.error("操作失败",e instanceof Error?e.message:"")}}return(()=>{var t=E();return t.firstChild,n(t,a(U,{get when(){return!h()},get fallback(){return(()=>{var e=F();return n(e,a(C,{size:"lg"})),e})()},get children(){var e=z(),y=e.firstChild,_=y.firstChild,$=_.nextSibling;return n($,a(S,{get each(){return m()},children:r=>(()=>{var d=M(),f=d.firstChild,u=f.nextSibling,x=u.nextSibling,v=x.nextSibling;return n(f,()=>r.username),n(u,()=>r.email),n(x,a(k,{get variant(){return r.isBanned?"error":"success"},get children(){return r.isBanned?"已封禁":"正常"}})),n(v,a(w,{size:"xs",get variant(){return r.isBanned?"success":"danger"},onClick:()=>b(r),get children(){return r.isBanned?"解封":"封禁"}})),d})()})),e}}),null),t})()}export{P as default};
